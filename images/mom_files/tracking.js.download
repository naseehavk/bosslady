/******/ (function() { // webpackBootstrap
var __webpack_exports__ = {};
/*!************************************************************************************************************!*\
  !*** ../../capri-core-sfcc/src/cartridges/plugin_datalayer_custom/cartridge/client/default/js/tracking.js ***!
  \************************************************************************************************************/
try {
  if (typeof sfraDatalayer === 'undefined') {
    window.sfraDatalayer = {
      data: {},
      event: []
    };
  }

  var sfraTrackingData = {};
  document.addEventListener('DOMContentLoaded', function () {
    window.assignTracking = function (nodePropertyName, trackingObject, node) {
      var tmp = JSON.parse(node.dataset[nodePropertyName]);

      if (tmp && tmp.constructor === Array) {
        tmp.forEach(function (m) {
          Object.assign(trackingObject, m);
        });
      }
    };

    var viewNodes = document.querySelectorAll('[data-tracking-view]'); // eslint-disable-next-line no-undef

    viewNodes.forEach(assignTracking.bind(this, 'trackingView', sfraTrackingData));
    window.sfraDatalayer.data = sfraTrackingData; // eslint-disable-next-line no-unused-vars

    window.$('body').on('product:beforeAddToCart', function (event, data) {
      sfraDatalayer.event.push('beforeAddToCart event');
    }); // eslint-disable-next-line no-unused-vars

    window.$('body').on('product:afterAddToCart', function (event, data) {
      sfraDatalayer.event.push('afterAddToCart event');
    }); // eslint-disable-next-line no-unused-vars

    window.$('body').on('search:sort', function (event, data) {
      sfraDatalayer.event.push('grid sort');
    });
    window.$('body').on('datalayerEvent:link', function (event, data) {
      var eventObj = data.datalayerEvent; // pass only the object if length is 1, else pass the complete object to dataLayer

      if (eventObj && eventObj.length === 1) {
        eventObj = eventObj[0];
      }

      sfraDatalayer.event.push(eventObj);
    });
  });
} catch (e) {
  // temporary work around to force a server side log entry if an exception happens
  var head = document.getElementsByTagName('head').item(0);
  var script = document.createElement('script');
  script.setAttribute('type', 'text/javascript');
  script.setAttribute('src', "${URLUtils.https(\"Error-Force\").abs()}?exception=".concat(e.toString()));
  head.appendChild(script);
}
/******/ })()
;
//# sourceMappingURL=tracking.js.map