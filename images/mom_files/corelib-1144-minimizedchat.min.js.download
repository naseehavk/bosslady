var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,h,k){d instanceof String&&(d=String(d));for(var p=d.length,m=0;m<p;m++){var x=d[m];if(h.call(k,x,m,d))return{i:m,v:x}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,h,k){if(d==Array.prototype||d==Object.prototype)return d;d[h]=k.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var h=0;h<d.length;++h){var k=d[h];if(k&&k.Math==Math)return k}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,h){var k=$jscomp.propertyToPolyfillSymbol[h];if(null==k)return d[h];k=d[k];return void 0!==k?k:d[h]};
$jscomp.polyfill=function(d,h,k,p){h&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,h,k,p):$jscomp.polyfillUnisolated(d,h,k,p))};$jscomp.polyfillUnisolated=function(d,h,k,p){k=$jscomp.global;d=d.split(".");for(p=0;p<d.length-1;p++){var m=d[p];if(!(m in k))return;k=k[m]}d=d[d.length-1];p=k[d];h=h(p);h!=p&&null!=h&&$jscomp.defineProperty(k,d,{configurable:!0,writable:!0,value:h})};
$jscomp.polyfillIsolated=function(d,h,k,p){var m=d.split(".");d=1===m.length;p=m[0];p=!d&&p in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var x=0;x<m.length-1;x++){var t=m[x];if(!(t in p))return;p=p[t]}m=m[m.length-1];k=$jscomp.IS_SYMBOL_NATIVE&&"es6"===k?p[m]:null;h=h(k);null!=h&&(d?$jscomp.defineProperty($jscomp.polyfills,m,{configurable:!0,writable:!0,value:h}):h!==k&&($jscomp.propertyToPolyfillSymbol[m]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(m):$jscomp.POLYFILL_PREFIX+m,m=
$jscomp.propertyToPolyfillSymbol[m],$jscomp.defineProperty(p,m,{configurable:!0,writable:!0,value:h})))};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(h,k){return $jscomp.findInternal(this,h,k).v}},"es6","es3");
(function(d){function h(a,b,f,c){c=c||function(){};if(!b)return a.show({duration:0,complete:c});f=f||200;var e={};switch(b){case "slideup":case "slidedown":case "slideleft":case "slideright":e.direction=b.replace("slide",""),b="slide"}a.show(b,e,f,c)}function k(a,b,f,c){c=c||function(){};if(!b)return a.hide({duration:0,complete:c});f=f||200;var e={};switch(b){case "slideup":case "slidedown":case "slideleft":case "slideright":e.direction=b.replace("slide",""),b="slide"}a.hide(b,e,f,c)}function p(a,
b){b&&a.css({fontStyle:b.italic?"italic":void 0,fontFamily:b.family,fontSize:b.size?b.size+"px":void 0,fontWeight:b.weight})}function m(a,b){try{var f=document.getElementById("webchatStyleRules"),c=f.sheet?f.sheet:f.styleSheet;c.insertRule?c.insertRule(a+" { "+b+" }",0):c.addRule&&c.addRule(a,b,0)}catch(e){}}function x(a){function b(c){c.length&&(c.css({width:"100%",height:"100%"}),b(c.parent()))}var f=10;(function e(){f&&(f--,b(a),window.setTimeout(e,500))})()}function t(a,b,f,c,e){try{var n=$("#appExplorer");
c&&$.each(c,function(l,u){n=n.find("div").filter(function(){return $(this).text()===u}).next()});n=n.find("div").filter(function(){return $(this).text()===a}).next();void 0!==e&&n.find("button").prop("disabled",!!e);n=n.find("select, input").first();void 0!==b&&n.val(b);not(f)||n.prop("disabled",f)}catch(l){}}var A=[{value:"slideup",caption:"Blind Up"},{value:"slidedown",caption:"Blind Down"},{value:"slideleft",caption:"Blind Left"},{value:"slideright",caption:"Blind Right"},{value:"clip",caption:"Clip"},
{value:"fade",caption:"Fade"},{value:"fold",caption:"Fold"},{value:"puff",caption:"Puff"},{value:"scale",caption:"Scale"}],F=[{value:"slideup",caption:"Blind Up"},{value:"slidedown",caption:"Blind Down"},{value:"slideleft",caption:"Blind Left"},{value:"slideright",caption:"Blind Right"},{value:"clip",caption:"Clip"},{value:"fade",caption:"Fade"},{value:"fold",caption:"Fold"},{value:"puff",caption:"Puff"},{value:"scale",caption:"Scale"}],g=function(a,b,f){g.SUPERconstructor.call(this,a,b,f?f:"chatminimizedctrl");
this.immovable=!0;this.erasable=this.nameable=!1};d.utils.inherit(g,d.ui.widget);d.ui.chatminimizedctrl=g;g.prototype.getProperties=function(a){a=[];a.push({caption:"Size",type:"group",brief_fn:function(b){return""}},{caption:"",type:"option",name:"windowSize",values:[{value:"FLAT_SMALL",caption:"Flat Small"},{value:"FLAT_MEDIUM",caption:"Flat Medium"},{value:"FLAT_BIG",caption:"Flat Big"},{value:"SQUARE_SMALL",caption:"Square Small"},{value:"SQUARE_MEDIUM",caption:"Square Medium"},{value:"SQUARE_BIG",
caption:"Square Big"},{value:"CUSTOM",caption:"Custom"}]},{caption:"Values",type:"group",brief_fn:function(b){return""}},{caption:"Width",type:"geometry",name:"width"},{caption:"Height",type:"geometry",name:"height"},{type:"endgroup"},{type:"endgroup"},{caption:"Position",type:"group",brief_fn:function(b){return""}},{caption:"Horizontal",type:"option",name:"horizontalPosition",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"CENTER",caption:"Center"},{value:"CUSTOM",caption:"Custom"}]},
{caption:"Vertical",type:"option",name:"verticalPosition",values:[{value:"TOP",caption:"Top"},{value:"BOTTOM",caption:"Bottom"},{value:"CENTER",caption:"Center"},{value:"CUSTOM",caption:"Custom"}]},{caption:"Values",type:"group",brief_fn:function(b){return""}},{caption:"Left",type:"string",name:"leftPosition"},{caption:"Right",type:"string",name:"rightPosition"},{caption:"Top",type:"string",name:"topPosition"},{caption:"Bottom",type:"string",name:"bottomPosition"},{type:"endgroup"},{type:"endgroup"},
{caption:"Active",type:"group",brief_fn:function(b){return""}},{caption:"Visible",type:"bool",name:"windowVisible"},{caption:"Icon",type:"bool-group",name:"iconEnabled",brief_fn:function(b){return""}},{caption:"Image",type:"image",name:"iconImage"},{caption:"Color",type:"color",name:"iconColor"},{caption:"Position",type:"option",name:"iconPosition",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"TOP",caption:"Top"},{value:"BOTTOM",caption:"Bottom"}]},{type:"endgroup"},
{caption:"Text",type:"bool-group",name:"textEnabled",brief_fn:function(b){return""}},{caption:"Content",type:"string",name:"textContent"},{caption:"Color",type:"color",name:"textColor"},{caption:"Font",type:"font",name:"textFont"},{caption:"Align",type:"option",name:"textAlign",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"CENTER",caption:"Center"}]},{type:"endgroup"},{caption:"Background",type:"bool-group",name:"backgroundEnabled",brief_fn:function(b){return""}},{caption:"Background",
type:"color",name:"background"},{type:"endgroup"},{caption:"Round",type:"group",brief_fn:function(b){return""}},{caption:"Top Left",type:"integer",name:"roundTopLeft"},{caption:"Top Right",type:"integer",name:"roundTopRight"},{caption:"Bottom Left",type:"integer",name:"roundBottomLeft"},{caption:"Bottom Right",type:"integer",name:"roundBottomRight"},{type:"endgroup"},{caption:"Shadow",type:"bool-group",name:"shadow",brief_fn:function(b){return""}},{caption:"Color",type:"color",name:"shadowColor"},
{caption:"Size",type:"integer",name:"shadowSize"},{type:"endgroup"});this.mobile||a.push({caption:"Hover",type:"group",brief_fn:function(b){return""}},{caption:"Change",type:"bool-group",name:"hoverChange",brief_fn:function(b){return""}},{caption:"Icon",type:"bool-group",name:"hoverIconEnabled",brief_fn:function(b){return""}},{caption:"Image",type:"image",name:"hoverIconImage"},{caption:"Color",type:"color",name:"hoverIconColor"},{caption:"Position",type:"option",name:"hoverIconPosition",values:[{value:"LEFT",
caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"TOP",caption:"Top"},{value:"BOTTOM",caption:"Bottom"}]},{type:"endgroup"},{caption:"Text",type:"bool-group",name:"hoverTextEnabled",brief_fn:function(b){return""}},{caption:"Content",type:"string",name:"hoverTextContent"},{caption:"Color",type:"color",name:"hoverTextColor"},{caption:"Font",type:"font",name:"hoverTextFont"},{caption:"Align",type:"option",name:"hoverTextAlign",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},
{value:"CENTER",caption:"Center"}]},{type:"endgroup"},{caption:"H.Size",type:"group",brief_fn:function(b){return""}},{caption:"Width",type:"geometry",name:"hoverWidth"},{caption:"Height",type:"geometry",name:"hoverHeight"},{type:"endgroup"},{caption:"Resize",type:"option",name:"hoverResize",values:[{value:"LEFT",caption:"To Left"},{value:"RIGHT",caption:"To Right"},{value:"TOP",caption:"To Top"},{value:"BOTTOM",caption:"To Bottom"},{value:"EXPAND",caption:"Expand"}]},{caption:"Effect",type:"group",
brief_fn:function(b){return""}},{caption:"Show",type:"bool-group",name:"hoverShowEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"hoverShowEffectType",values:A},{caption:"Duration",type:"integer",name:"hoverShowEffectDuration"},{type:"endgroup"},{caption:"Hide",type:"bool-group",name:"hoverHideEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"hoverHideEffectType",values:A},{caption:"Duration",type:"integer",name:"hoverHideEffectDuration"},{type:"endgroup"},
{type:"endgroup"},{caption:"Round",type:"group",brief_fn:function(b){return""}},{caption:"Top Left",type:"integer",name:"hoverRoundTopLeft"},{caption:"Top Right",type:"integer",name:"hoverRoundTopRight"},{caption:"Bot. Left",type:"integer",name:"hoverRoundBottomLeft"},{caption:"Bot. Right",type:"integer",name:"hoverRoundBottomRight"},{type:"endgroup"},{caption:"Shadow",type:"bool-group",name:"hoverShadow",brief_fn:function(b){return""}},{caption:"Color",type:"color",name:"hoverShadowColor"},{caption:"Size",
type:"integer",name:"hoverShadowSize"},{type:"endgroup"},{type:"endgroup"},{caption:"Background",type:"bool-group",name:"hoverBackgroundEnabled",brief_fn:function(b){return""}},{caption:"Background",type:"color",name:"hoverBackground"},{type:"endgroup"},{type:"endgroup"});a.push({caption:"New msgs",type:"group",brief_fn:function(b){return""}},{caption:"Background",type:"color",name:"newMsgsBackground"},{caption:"Blink",type:"bool-group",name:"newMsgsBlink",brief_fn:function(b){return""}},{caption:"Duration (ms)",
type:"integer",name:"newMsgsBlinkDuration"},{type:"endgroup"},{caption:"Number",type:"bool",name:"newMsgsNumber"},{type:"endgroup"},{type:"endgroup"},{caption:"Out of Hours",type:"group",brief_fn:function(b){return""}},{caption:"Visible",type:"bool",name:"out_windowVisible"},{caption:"Icon",type:"bool-group",name:"out_iconEnabled",brief_fn:function(b){return""}},{caption:"Image",type:"image",name:"out_iconImage"},{caption:"Color",type:"color",name:"out_iconColor"},{caption:"Position",type:"option",
name:"out_iconPosition",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"TOP",caption:"Top"},{value:"BOTTOM",caption:"Bottom"}]},{type:"endgroup"},{caption:"Text",type:"bool-group",name:"out_textEnabled",brief_fn:function(b){return""}},{caption:"Content",type:"string",name:"out_textContent"},{caption:"Color",type:"color",name:"out_textColor"},{caption:"Font",type:"font",name:"out_textFont"},{caption:"Align",type:"option",name:"out_textAlign",values:[{value:"LEFT",caption:"Left"},
{value:"RIGHT",caption:"Right"},{value:"CENTER",caption:"Center"}]},{type:"endgroup"},{caption:"Background",type:"bool-group",name:"out_backgroundEnabled",brief_fn:function(b){return""}},{caption:"Background",type:"color",name:"out_background"},{type:"endgroup"},{caption:"Round",type:"group",brief_fn:function(b){return""}},{caption:"Top Left",type:"integer",name:"out_roundTopLeft"},{caption:"Top Right",type:"integer",name:"out_roundTopRight"},{caption:"Bottom Left",type:"integer",name:"out_roundBottomLeft"},
{caption:"Bottom Right",type:"integer",name:"out_roundBottomRight"},{type:"endgroup"},{caption:"Shadow",type:"bool-group",name:"out_shadow",brief_fn:function(b){return""}},{caption:"Color",type:"color",name:"out_shadowColor"},{caption:"Size",type:"integer",name:"out_shadowSize"},{type:"endgroup"});this.mobile||a.push({caption:"Hover",type:"group",brief_fn:function(b){return""}},{caption:"Change",type:"bool-group",name:"out_hoverChange",brief_fn:function(b){return""}},{caption:"Icon",type:"bool-group",
name:"out_hoverIconEnabled",brief_fn:function(b){return""}},{caption:"Image",type:"image",name:"out_hoverIconImage"},{caption:"Color",type:"color",name:"out_hoverIconColor"},{caption:"Position",type:"option",name:"out_hoverIconPosition",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"TOP",caption:"Top"},{value:"BOTTOM",caption:"Bottom"}]},{type:"endgroup"},{caption:"Text",type:"bool-group",name:"out_hoverTextEnabled",brief_fn:function(b){return""}},{caption:"Content",
type:"string",name:"out_hoverTextContent"},{caption:"Color",type:"color",name:"out_hoverTextColor"},{caption:"Font",type:"font",name:"out_hoverTextFont"},{caption:"Align",type:"option",name:"out_hoverTextAlign",values:[{value:"LEFT",caption:"Left"},{value:"RIGHT",caption:"Right"},{value:"CENTER",caption:"Center"}]},{type:"endgroup"},{caption:"H.Size",type:"group",brief_fn:function(b){return""}},{caption:"Width",type:"geometry",name:"out_hoverWidth"},{caption:"Height",type:"geometry",name:"out_hoverHeight"},
{type:"endgroup"},{caption:"Resize",type:"option",name:"out_hoverResize",values:[{value:"LEFT",caption:"To Left"},{value:"RIGHT",caption:"To Right"},{value:"TOP",caption:"To Top"},{value:"BOTTOM",caption:"To Bottom"},{value:"EXPAND",caption:"Expand"}]},{caption:"Effect",type:"group",brief_fn:function(b){return""}},{caption:"Show",type:"bool-group",name:"out_hoverShowEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"out_hoverShowEffectType",values:A},{caption:"Duration",
type:"integer",name:"out_hoverShowEffectDuration"},{type:"endgroup"},{caption:"Hide",type:"bool-group",name:"hoverHideEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"out_hoverHideEffectType",values:A},{caption:"Duration",type:"integer",name:"out_hoverHideEffectDuration"},{type:"endgroup"},{type:"endgroup"},{caption:"Round",type:"group",brief_fn:function(b){return""}},{caption:"Top Left",type:"integer",name:"out_hoverRoundTopLeft"},{caption:"Top Right",type:"integer",
name:"out_hoverRoundTopRight"},{caption:"Bot. Left",type:"integer",name:"out_hoverRoundBottomLeft"},{caption:"Bot. Right",type:"integer",name:"out_hoverRoundBottomRight"},{type:"endgroup"},{caption:"Shadow",type:"bool-group",name:"out_hoverShadow",brief_fn:function(b){return""}},{caption:"Color",type:"color",name:"out_hoverShadowColor"},{caption:"Size",type:"integer",name:"out_hoverShadowSize"},{type:"endgroup"},{type:"endgroup"},{caption:"Background",type:"bool-group",name:"out_hoverBackgroundEnabled",
brief_fn:function(b){return""}},{caption:"Background",type:"color",name:"out_hoverBackground"},{type:"endgroup"},{type:"endgroup"});a.push({type:"endgroup"},{caption:"Effects",type:"group",brief_fn:function(b){return""}},{caption:"First Show",type:"bool-group",name:"firstShowEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"firstShowEffectType",values:A},{caption:"Duration (ms)",type:"integer",name:"firstShowEffectDuration"},{type:"endgroup"},{caption:"Don't Hide",type:"bool",
name:"windowDontHide"},{caption:"Show",type:"bool-group",name:"showEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"showEffectType",values:A},{caption:"Duration (ms)",type:"integer",name:"showEffectDuration"},{type:"endgroup"},{caption:"Hide",type:"bool-group",name:"hideEffect",brief_fn:function(b){return""}},{caption:"Effect",type:"option",name:"hideEffectType",values:F},{caption:"Duration (ms)",type:"integer",name:"hideEffectDuration"},{type:"endgroup"},{caption:"Scroll",
type:"bool-group",name:"scrollEffect",brief_fn:function(b){return""}},{caption:"Duration (ms)",type:"integer",name:"scrollEffectDuration"},{type:"endgroup"},{type:"endgroup"},{caption:"Preview",type:"group",brief_fn:function(b){return""}},{caption:"Mode",type:"option",name:"preview_mode",values:[{value:"ACTIVE",caption:"Active"},{value:"OUT_HOURS",caption:"Out of Hours"}]},{type:"endgroup"});this._setProperties();return a};g.prototype.destroy=function(){g.SUPERclass.destroy.call(this)};g.prototype._designer=
function(){return this.environment&&(this.environment.designer||this.environment.arguments.debug)};g.prototype._designerPreview=function(){return this.environment&&this.environment.arguments.debug};g.prototype._designerGrid=function(){return this.environment&&this.environment.designer};g.prototype.isMobile=function(){return this.environment&&this.environment.arguments&&this.environment.arguments.mobile&&!0||!1};g.prototype.outOfHours=function(){return this._designer()?"OUT_HOURS"===this.preview_mode:
this.environment&&this.environment.arguments&&this.environment.arguments.outOfHours&&!0||!1};g.prototype.inactive=function(){return this.environment&&this.environment.arguments&&this.environment.arguments.inactive&&!0||!1};g.prototype._getProperty=function(a){return this[(this.outOfHours()?"out_":"")+a]};g.prototype._setProperty=function(a,b){this[(this.outOfHours()?"out_":"")+a]=this._T(b)};g.prototype._makeUI=function(){this.wnd=d.utils.makeElement("div",!1);this.wnd.className=this._designer()?
"chatMinimizedCtrlDesigner":"chatMinimizedCtrl";this.isMobile()&&$("body").addClass("mobile");this.outOfHours()&&(this.wnd.className+=" outOfHours");var a=this.inactive();void 0!==this.id&&(this.wnd.id=this.id);var b="<div class='chatMinimizedContainer'><div class='chatMinimizedTitle "+(a?"inactive":"active")+"'><span class='chatUnreadedMessages' style='display:none;'></span><i class='chatMinimizedIcon iconChatHeader' "+(this._getProperty("iconEnabled")?"":"style='display:none;'")+"></i><label class='chatMinimizedText' "+
(this._getProperty("textEnabled")?"":"style='display:none;'")+"></label></div></div>";$(this.wnd).html(b);if(this._getProperty("hoverChange")){a="<div class='chatMinimizedHoverContainer'><div class='chatMinimizedTitle "+(a?"inactive":"active")+"'><span class='chatUnreadedMessages' style='display:none;'></span><i class='chatMinimizedIcon iconChatHeader' "+(this._getProperty("hoverIconEnabled")?"":"style='display:none;'")+"></i><label class='chatMinimizedText' "+(this._getProperty("hoverTextEnabled")?
"":"style='display:none;'")+"></label></div></div>";$(this.wnd).append(a);if(this._designerPreview()){a={width:this.width,height:this.height,position:"absolute"};b={width:this._getProperty("hoverWidth")||this.width,height:this._getProperty("hoverHeight")||this.height};switch(this._getProperty("hoverResize")){case "LEFT":a.right="0px";break;case "RIGHT":a.left="0px";break;default:a.left="calc( 50% - "+this.width/2+"px)"}switch(this._getProperty("hoverResize")){case "TOP":a.bottom="0px";break;case "BOTTOM":a.top=
"0px";break;default:a.top="calc( 50% - "+this.height/2+"px)"}$(".chatMinimizedContainer",this.wnd).css(a);$(".chatMinimizedHoverContainer",this.wnd).css(b);m(".chatMinimizedCtrlDesigner","width: "+(this._getProperty("hoverWidth")||this.width)+"!important; height: "+(this._getProperty("hoverHeight")||this.height)+"!important;")}this.setHoverIcon();this.setHoverText()}this._setStyle();this.setIcon();this.setText()};g.prototype._setStyle=function(){function a(e,n){function l(C){n&&(C="hover"+C.charAt(0).toUpperCase()+
C.slice(1));return b._getProperty(C)}var u=l("backgroundEnabled");u||e.addClass("backgroundDisabled");if(b._designer()&&l("shadow")){var r="0px 0px "+(l("shadowSize")||12)+"px "+(l("shadowColor")||"#aaaaaa");$(e).css({"-webkit-box-shadow":r,"-moz-box-shadow":r,"box-shadow":r})}r={"background-color":u&&l("background")||void 0,color:l("textColor")||void 0};var q={color:l("iconColor")||void 0},v={},w=l("iconPosition")||"LEFT",y=l("textAlign")||"LEFT",D=l("textEnabled"),E=l("iconEnabled"),B=l("textFont");
if(B&&B.size&&parseInt(B.size)){var z=2*parseInt(B.size);q["font-size"]=""+z+"px";q.width=z;q.height=z;if("LEFT"===w||"RIGHT"===w)v["margin-top"]=""+z/4+"px"}if(D){switch(w){case "LEFT":q["margin-right"]="6px";break;case "RIGHT":$(".chatMinimizedIcon",e).remove().appendTo($(".chatMinimizedTitle",e));q["margin-left"]="6px";break;case "TOP":case "BOTTOM":"BOTTOM"===w&&$(".chatMinimizedIcon",e).remove().appendTo($(".chatMinimizedTitle",e)),q.display=E?"block":"none",q.width="100%",q.clear="both",v.clear=
"both",v.width="100%"}switch(y){case "LEFT":q["float"]="left";q["text-align"]="left";v["float"]="left";v["text-align"]="left";break;case "RIGHT":q["float"]="right";q["text-align"]="right";v["float"]="right";v["text-align"]="right";"LEFT"===w?$(".chatMinimizedIcon",e).remove().appendTo($(".chatMinimizedTitle",e)):"RIGHT"===w&&$(".chatMinimizedText",e).remove().appendTo($(".chatMinimizedTitle",e));break;case "CENTER":"TOP"===w||"BOTTOM"===w?(r["text-align"]="center",q.width="100%",v["text-align"]="center"):
(q["float"]="left",q["text-align"]="left",v["float"]="left",v["text-align"]="left",y=$(".chatMinimizedCenterContainer",e),y.length||($(".chatMinimizedTitle",e).append("<div class='chatMinimizedCenterContainer'></div>"),y=$(".chatMinimizedCenterContainer",e)),D=$(".chatMinimizedIcon",e),z=$(".chatMinimizedText",e),"LEFT"===w?(D.remove().appendTo(y),z.remove().appendTo(y)):(z.remove().appendTo(y),D.remove().appendTo(y)))}}else q.width="auto",q.height="100%",q["font-size"]=Math.min((n&&l("width")||b.width)-
30,(n&&l("height")||b.height)-20);E||(v["margin-top"]="0px");$(".chatMinimizedTitle",e).css(r);$(".chatMinimizedIcon",e).css(q);$(".chatMinimizedText",e).css(v);p($(".chatMinimizedText",e),B);u&&(l("roundTopLeft")||l("roundTopRight"))&&(r={"border-top-left-radius":l("roundTopLeft")?l("roundTopLeft")+"px":null,"border-top-right-radius":l("roundTopRight")?l("roundTopRight")+"px":null},e.css(r),$(".chatMinimizedTitle",e).css(r));u&&(l("roundBottomLeft")||l("roundBottomRight"))&&(r={"border-bottom-left-radius":l("roundBottomLeft")?
l("roundBottomLeft")+"px":null,"border-bottom-right-radius":l("roundBottomRight")?l("roundBottomRight")+"px":null},e.css(r),$(".chatMinimizedTitle",e).css(r))}var b=this;a($(".chatMinimizedContainer",this.wnd));if(!this.isMobile())if(this._getProperty("hoverChange")){a($(".chatMinimizedHoverContainer",this.wnd),!0);var f=$(".chatMinimizedContainer",this.wnd),c=$(".chatMinimizedHoverContainer",this.wnd);$(this.wnd).hover(function(){k(f,b._getProperty("hoverHideEffect")&&b._getProperty("hoverHideEffectType"),
b._getProperty("hoverHideEffectDuration"),function(){b.__fit(!0,!0,function(){h(c,b._getProperty("hoverShowEffect")&&b._getProperty("hoverShowEffectType"),b._getProperty("hoverShowEffectDuration"),function(){iFrameEventListener.showMinimizedShadow()})})})},function(){k(c,b._getProperty("hoverHideEffect")&&b._getProperty("hoverHideEffectType"),b._getProperty("hoverHideEffectDuration"),function(){b.__fit(!0,!1,function(){h(f,b._getProperty("hoverShowEffect")&&b._getProperty("hoverShowEffectType"),b._getProperty("hoverShowEffectDuration"),
function(){iFrameEventListener.showMinimizedShadow()})})})})}else!this.inactive()&&this._getProperty("hoverBackgroundEnabled")&&this._getProperty("hoverBackground")&&$(".chatMinimizedTitle",$(".chatMinimizedContainer",this.wnd)).hover(function(){$(this).css({"background-color":b._getProperty("hoverBackground")||void 0})},function(){$(this).css({"background-color":b._getProperty("backgroundEnabled")&&b._getProperty("background")||""})});this._getProperty("newMsgsBackground")&&m(".newMessages .chatMinimizedTitle",
"background-color: "+this._getProperty("newMsgsBackground")+"!important;");m("#startButton, #tw-root, #startButton > div","overflow: hidden!important; width: 100%!important; height: 100%!important;")};g.prototype.setText=function(a){this._setProperty("textContent",void 0===a?this._getProperty("textContent"):a||"");a=$(".chatMinimizedContainer",this.wnd);$(".chatMinimizedText",a).text(this._getProperty("textContent"))};g.prototype.getText=function(){return this._getProperty("textContent")};g.prototype.setHoverText=
function(a){this._setProperty("hoverTextContent",void 0===a?this._getProperty("hoverTextContent"):a||"");a=$(".chatMinimizedHoverContainer",this.wnd);$(".chatMinimizedText",a).text(this._getProperty("hoverTextContent"))};g.prototype.getHoverText=function(){return this._getProperty("hoverTextContent")};g.prototype._getCustomImagePath=function(a){this._appName&&"!"!==a.substring(0,1)&&(a="@"+this._appName+"@"+a);return d.ui.getApplication().getImageSRC(a)};g.prototype.setIcon=function(a){this._setProperty("iconImage",
void 0===a?this._getProperty("iconImage"):a||null);var b=null;this._getProperty("iconImage")&&(a=this._getCustomImagePath(this._getProperty("iconImage")),b=$('<div class="chatMinimizedIconImage"></div>'),b.css("background-image",'url("'+encodeURI(a)+'")'),b.css("background-position","center"));a=$(".chatMinimizedContainer",this.wnd);$(".chatMinimizedIcon",a).toggleClass("iconChatHeader",!b).html("").append(b);b=this._getProperty("iconPosition")||"LEFT";var f=this._getProperty("textAlign")||"LEFT";
"TOP"!==b&&"BOTTOM"!==b||$(".chatMinimizedIconImage",a).css("background-position-x","LEFT"===f?"0px":"RIGHT"===f?"100%":void 0)};g.prototype.getIcon=function(){return this._getProperty("iconImage")};g.prototype.setHoverIcon=function(a){this._setProperty("hoverIconImage",void 0===a?this._getProperty("hoverIconImage"):a||null);var b=null;this._getProperty("hoverIconImage")&&(a=this._getCustomImagePath(this._getProperty("hoverIconImage")),b=$('<div class="chatMinimizedIconImage"></div>'),b.css("background-image",
'url("'+encodeURI(a)+'")'),b.css("background-position","center"));a=$(".chatMinimizedHoverContainer",this.wnd);$(".chatMinimizedIcon",a).toggleClass("iconChatHeader",!b).html("").append(b);b=this._getProperty("hoverIconPosition")||"LEFT";var f=this._getProperty("hoverTextAlign")||"LEFT";"TOP"!==b&&"BOTTOM"!==b||$(".chatMinimizedIconImage",a).css("background-position-x","LEFT"===f?"0px":"RIGHT"===f?"100%":void 0)};g.prototype.getHoverIcon=function(){return this._getProperty("hoverIconImage")};g.prototype.showChat=
function(){iFrameEventListener.openChat()};g.prototype._bindEvents=function(){if(!this._designer()){var a=this;$(this.wnd).off("click").on("click",function(){a.showChat()})}};var G={FLAT_SMALL:{width:260,height:40},FLAT_MEDIUM:{width:280,height:40},FLAT_BIG:{width:300,height:40},SQUARE_SMALL:{width:80,height:80},SQUARE_MEDIUM:{width:120,height:120},SQUARE_BIG:{width:160,height:160}},H={FLAT_SMALL:{width:60,height:40},FLAT_MEDIUM:{width:80,height:40},FLAT_BIG:{width:100,height:40},SQUARE_SMALL:{width:60,
height:60},SQUARE_MEDIUM:{width:80,height:80},SQUARE_BIG:{width:120,height:120}};g.prototype._setSize=function(){var a=(this.mobile?H:G)[this.windowSize];a?(this.width=a.width,this.height=a.height,this.resizable=!1):(this.windowSize="CUSTOM",this.resizable=!0)};g.prototype._getSize=function(a){var b={width:this.width,height:this.height};if(a&&this._getProperty("hoverChange")){a=this._getProperty("hoverWidth")||b.width;var f=this._getProperty("hoverHeight")||b.height;this._designer()?(b.width=a&&a>
b.width?a:b.width,b.height=f&&f>b.height?f:b.height):(b.resize=this._getProperty("hoverResize"),b.widthDiff=a-b.width,b.heightDiff=f-b.height,b.width=a,b.height=f)}return b};g.prototype._setPosition=function(){switch(this.horizontalPosition){case "LEFT":this.leftPosition="5%";this.rightPosition="";break;case "RIGHT":this.leftPosition="";this.rightPosition="5%";break;case "CENTER":this.rightPosition=this.leftPosition="";break;default:this.horizontalPosition="CUSTOM"}switch(this.verticalPosition){case "TOP":this.topPosition=
"0px";this.bottomPosition="";break;case "BOTTOM":this.topPosition="";this.bottomPosition="0px";break;case "CENTER":this.bottomPosition=this.topPosition="";break;default:this.verticalPosition="CUSTOM"}};g.prototype._demoPosition=function(){var a={position:"fixed"},b=this._getSize(!0);"CENTER"===this.horizontalPosition?(a.left="calc( 50% - "+b.width/2+"px)",a.right=""):(a.left=this.leftPosition||"",a.right=this.rightPosition||"");"CENTER"===this.verticalPosition?(a.top="calc( 50% - "+b.height/2+"px)",
a.bottom=""):(a.top=this.topPosition||"",a.bottom=this.bottomPosition||"");$(this.wnd).css(a)};g.prototype._setProperties=function(){var a=this;(function f(){if(!(0<$("#appExplorer").first().find("input").filter(function(){return"chatminimizedctrl"===$(this).val()}).length))return window.setTimeout(f,300);t("",a.windowSize,null,["Size"]);var c="CUSTOM"!==a.windowSize;t("Width",a.width,c,["Size","Values"]);t("Height",a.height,c,["Size","Values"]);t("Horizontal",a.horizontalPosition,null,["Position"]);
c="CUSTOM"!==a.horizontalPosition;t("Left",a.leftPosition,c,["Position","Values"]);t("Right",a.rightPosition,c,["Position","Values"]);t("Vertical",a.verticalPosition,null,["Position"]);c="CUSTOM"!==a.verticalPosition;t("Top",a.topPosition,c,["Position","Values"]);t("Bottom",a.bottomPosition,c,["Position","Values"]);c=!!a.windowDontHide;t("Show",void 0,c,["Effects"],c);t("Hide",void 0,c,["Effects"],c)})()};g.prototype._loadDesginer=function(){this._setProperties();(function b(){if(!$("#startButton").length)return window.setTimeout(b,
300);$("#startButton").parent().siblings().hide()})()};g.prototype.create=function(){var a=this;$("#webchatStyleRules").remove();$("head").append("<style id='webchatStyleRules'></style>");a._setSize();a._setPosition();a.environment&&a.environment.designer&&a._loadDesginer();g.SUPERclass.create.call(this);a._makeUI();a._bindEvents();a._designer()?a.environment.arguments.debug&&($(a.wnd).hide(),window.setTimeout(function(){a._demoPosition();$(a.wnd).show()},1)):$(a.wnd).hide()};g.prototype.__onDesignerResize=
function(){this._setStyle()};g.prototype._show=function(a){a=a||function(){};this.wasShown?h($(this.wnd),!this.windowDontHide&&this.showEffect&&this.showEffectType,this.showEffectDuration,a):(this.wasShown=!0,h($(this.wnd),this.firstShowEffect&&this.firstShowEffectType,this.firstShowEffectDuration,a))};g.prototype._hide=function(a){a=a||function(){};if(this.windowDontHide)return a();k($(this.wnd),this.hideEffect&&this.hideEffectType,this.hideEffectDuration,a)};g.prototype.onNewMessage=function(){if(!this._newMessages){this._newMessages=
0;var a=$(".chatMinimizedContainer",this.wnd);a.addClass("newMessages");this.newMsgsBlink&&(this._newMsgsBlickInterval=window.setInterval(function(){a.toggleClass("newMessages")},this.newMsgsBlinkDuration||500));this.newMsgsNumber&&$(".chatUnreadedMessages",this.wnd).show()}this._newMessages++;$(".chatUnreadedMessages",this.wnd).text(this._newMessages)};g.prototype.onMessagesReaded=function(){this._newMessages=0;$(".chatMinimizedContainer",this.wnd).removeClass("newMessages");this._newMsgsBlickInterval&&
(window.clearInterval(this._newMsgsBlickInterval),this._newMsgsBlickInterval=null);$(".chatUnreadedMessages",this.wnd).hide().text("")};g.prototype.__fit=function(a,b,f){function c(r){b&&(r="hover"+r.charAt(0).toUpperCase()+r.slice(1));return e._getProperty(r)}f=f||function(){};var e=this;if(e._designer())return f();var n=this._getSize(b);a={size:{width:""+n.width+"px",height:""+n.height+"px"},position:{},resize:a};var l,u;n.resize&&(0<n.widthDiff&&"LEFT"!==n.resize&&"RIGHT"!==n.resize&&(l=n.widthDiff/
2),0<n.heightDiff&&"TOP"!==n.resize&&"BOTTOM"!==n.resize&&(u=n.heightDiff/2));"CENTER"===this.horizontalPosition?a.position.left="calc( 50% - "+n.width/2+"px)":this.leftPosition?a.position.left=l?"calc( "+this.leftPosition+" - "+l+"px)":this.leftPosition:this.rightPosition&&(a.position.left="calc( 100% - "+this.rightPosition+" - "+a.size.width+(l?" + "+l+"px":"")+")");"CENTER"===this.verticalPosition?a.position.top="calc( 50% - "+n.height/2+"px)":this.topPosition?a.position.top=u?"calc( "+this.topPosition+
" - "+u+"px)":this.topPosition:this.bottomPosition&&(a.position.top="calc( 100% - "+this.bottomPosition+" - "+a.size.height+(u?" + "+u+"px":"")+")");e._getProperty(b?"hoverShadow":"shadow")&&(a.shadow={color:e._getProperty(b?"hoverShadowColor":"shadowColor")||"#aaaaaa",size:e._getProperty(b?"hoverShadowSize":"shadowSize")||12});c("backgroundEnabled")&&(c("roundTopLeft")||c("roundTopRight")||c("roundBottomLeft")||c("roundBottomRight"))&&(a.round={"border-top-left-radius":c("roundTopLeft")?c("roundTopLeft")+
"px":null,"border-top-right-radius":c("roundTopRight")?c("roundTopRight")+"px":null,"border-bottom-left-radius":c("roundBottomLeft")?c("roundBottomLeft")+"px":null,"border-bottom-right-radius":c("roundBottomRight")?c("roundBottomRight")+"px":null});a.dontHide=!!e.windowDontHide;a.scroll=this.scrollEffect?{duration:this.scrollEffectDuration||500}:null;iFrameEventListener.fitMinimizedChat(e,a,f)};g.prototype.start=function(){var a=this;a._designer()||(x($(a.wnd)),a.__fit(!1,!1,function(b){a._getProperty("windowVisible")&&
0<b?a._show(function(){iFrameEventListener.showMinimizedShadow()}):0>b&&(a.wasShown=!0)}))}})(__icc__);
