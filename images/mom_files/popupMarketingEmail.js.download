/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./cartridges/app_mk_storefront/cartridge/client/default/js/components/cookie.js":
/*!***************************************************************************************!*\
  !*** ./cartridges/app_mk_storefront/cartridge/client/default/js/components/cookie.js ***!
  \***************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";


var SCREENSIZE = (__webpack_require__(/*! ../utilities/constants */ "./cartridges/app_mk_storefront/cartridge/client/default/js/utilities/constants.js").SCREENSIZE);
/**
 * Get cookie value by cookie name from browser
 * @param {string} cookieName - name of the cookie
 * @returns {string} cookie value of the found cookie name
 */


function getCookie(cookieName) {
  var name = cookieName + '=';
  var decodedCookie = decodeURIComponent(document.cookie);
  var cookieArray = decodedCookie.split(';');

  for (var i = 0; i < cookieArray.length; i++) {
    var cookieItem = cookieArray[i];

    while (cookieItem.charAt(0) === ' ') {
      cookieItem = cookieItem.substring(1);
    }

    if (cookieItem.indexOf(name) === 0) {
      return cookieItem.substring(name.length, cookieItem.length);
    }
  }

  return '';
}
/**
 * Sets cookie value by cookie name from browser
 * @param {string} cookieName - name of the cookie
 * @param {string} cookieValue - value of the cookie
 * @param {integer} seconds - cookie's length of days to be valid
 */


function createCookie(cookieName, cookieValue, seconds) {
  var expires = '0';

  if (seconds) {
    var date = new Date();
    date.setTime(date.getTime() + parseInt(seconds, 10));
    expires = '; expires=' + date.toGMTString();
  }

  document.cookie = cookieName + '=' + cookieValue + expires + '; path=/';
}
/**
 * Sets a cookie to -1 invalidating and erasing the cookie name from browser
 * @param {string} cookieName - name of the cookie
 */


function eraseCookie(cookieName) {
  createCookie(cookieName, '', -1);
}
/**
 *  Updates variable for live-chat container bottom position if cookie consent box is NOT present
 */


function updateLiveChatPosition() {
  $(document).on('click', '#onetrust-accept-btn-handler, #onetrust-reject-all-handler, .onetrust-close-btn-handler', function () {
    var $webchatBtn = $('.webchatStartButtonContainer');
    createCookie('oneTrustValue', 'true', 24 * 60 * 60 * 1000);

    if ($webchatBtn.length) {
      document.documentElement.style.setProperty('--webchat-adjusted-space', '0px');
    }
  });
}
/**
 *  Updates variable of live-chat container bottom position if cookie consent box is present
 */


function checkCookieConsent() {
  var onetrustEnabled = $('#oneTrustCheck').data('onetrustEnabled');
  var onetrustCookieValue = getCookie('oneTrustValue'); // check if onetrust cookie is enabled and if cookie value is present

  if (onetrustEnabled && !onetrustCookieValue) {
    var addedBottomPosition = $(window).outerWidth() > SCREENSIZE.DESKTOPMIN ? '100px' : '340px';
    document.documentElement.style.setProperty('--webchat-adjusted-space', addedBottomPosition);
  }
}

module.exports = {
  getCookie: getCookie,
  createCookie: createCookie,
  eraseCookie: eraseCookie,
  updateLiveChatPosition: updateLiveChatPosition,
  checkCookieConsent: checkCookieConsent
};

/***/ }),

/***/ "./cartridges/app_mk_storefront/cartridge/client/default/js/popupMarketingEmail/popupEmail.js":
/*!****************************************************************************************************!*\
  !*** ./cartridges/app_mk_storefront/cartridge/client/default/js/popupMarketingEmail/popupEmail.js ***!
  \****************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";


var cookie = __webpack_require__(/*! ../components/cookie */ "./cartridges/app_mk_storefront/cartridge/client/default/js/components/cookie.js");

module.exports = function () {
  // eslint-disable-next-line no-underscore-dangle
  window.__lightBoxOpen__ = function () {
    var lightBoxCookie = cookie.getCookie('lightBoxCookie');

    if (lightBoxCookie) {
      return false;
    }

    cookie.createCookie('lightBoxCookie', 'true', '86400');
    $('#popEmailModal').modal();
  };

  $('.popup-signup-btn').on('click', function (e) {
    e.preventDefault();
    var $modal = $(this).parents('.modal-content');
    var $form = $(this).parent('form');
    var $inputFormField = $form.find('#popup-email-input');
    $modal.spinner().start();

    if ($inputFormField.hasClass('is-invalid')) {
      $modal.spinner().stop();
      return false;
    }

    var popUpEmailrUrl = $form.attr('action');
    var creatAccountUrl = $form.data('create-account');
    var emailAddress = $inputFormField.val();
    $.ajax({
      url: popUpEmailrUrl,
      type: 'post',
      dataType: 'json',
      data: $form.serialize(),
      success: function success(data) {
        $modal.spinner().stop();

        if (!data.success) {
          $form.trigger('popup-email-signup-form:error', data);
        } else if (!$inputFormField.hasClass('is-invalid')) {
          $('#popEmailModal').modal('hide');
          window.location.href = creatAccountUrl + '?email=' + emailAddress;
        }
      },
      error: function error(data) {
        $modal.spinner().stop();
        $form.trigger('popup-email-signup-form:error', data);
      }
    });
  });
};

/***/ }),

/***/ "./cartridges/app_mk_storefront/cartridge/client/default/js/util.js":
/*!**************************************************************************!*\
  !*** ./cartridges/app_mk_storefront/cartridge/client/default/js/util.js ***!
  \**************************************************************************/
/***/ (function(module) {

"use strict";


function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

module.exports = function (include) {
  if (typeof include === 'function') {
    include();
  } else if (_typeof(include) === 'object') {
    Object.keys(include).forEach(function (key) {
      if (typeof include[key] === 'function') {
        include[key]();
      }
    });
  }
};

/***/ }),

/***/ "./cartridges/app_mk_storefront/cartridge/client/default/js/utilities/constants.js":
/*!*****************************************************************************************!*\
  !*** ./cartridges/app_mk_storefront/cartridge/client/default/js/utilities/constants.js ***!
  \*****************************************************************************************/
/***/ (function(module) {

var SCREENSIZES = {
  MOBILEMAX: 767,
  LANDSCAPEHEIGHTMAX: 575,
  TABLETMIN: 768,
  TABLETMAX: 1023,
  DESKTOPMIN: 1024
};
var GIFT_CERTIFICATE = 'GIFT_CERTIFICATE';
var CREDIT_CARD = 'CREDIT_CARD';
var PAYPAL = 'PAYPAL';
var MENUHOVERDELAY = 250;
var MENUCLOSEDELAY = 250;
var SUBMENUHOVERDELAY = 500;
var FREESHIPPING = 'FREE';
var STATELABEL = 'state';
var NEWCARD = 'newcard';
var NA_COUNTRIES = ['us', 'ca'];
var EU_PHONE_NUMBER_COUNTRY_CODES = {
  GB: 44,
  DE: 49,
  FR: 33,
  IT: 39,
  ES: 34,
  AT: 43,
  BE: 32,
  CZ: 420,
  HU: 36,
  NL: 31,
  PL: 48,
  PT: 351,
  RO: 40,
  IE: 353,
  SE: 46,
  CH: 41,
  DK: 45,
  FI: 358,
  LV: 371,
  LT: 370,
  LU: 352,
  NO: 47
};
var DSR_FORM_DETAILS_NOT_REQUIRED_TYPE = ['AccessRequest', 'CorrectionRequest'];
module.exports = {
  SCREENSIZE: SCREENSIZES,
  GIFT_CERTIFICATE: GIFT_CERTIFICATE,
  CREDIT_CARD: CREDIT_CARD,
  PAYPAL: PAYPAL,
  MENUCLOSEDELAY: MENUCLOSEDELAY,
  EU_PHONE_NUMBER_COUNTRY_CODES: EU_PHONE_NUMBER_COUNTRY_CODES,
  FREESHIPPING: FREESHIPPING,
  DSR_FORM_DETAILS_NOT_REQUIRED_TYPE: DSR_FORM_DETAILS_NOT_REQUIRED_TYPE,
  STATELABEL: STATELABEL,
  NEWCARD: NEWCARD,
  MENUHOVERDELAY: MENUHOVERDELAY,
  NA_COUNTRIES: NA_COUNTRIES,
  SUBMENUHOVERDELAY: SUBMENUHOVERDELAY
};

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
!function() {
"use strict";
/*!*****************************************************************************************!*\
  !*** ./cartridges/app_mk_storefront/cartridge/client/default/js/popupMarketingEmail.js ***!
  \*****************************************************************************************/


var processInclude = __webpack_require__(/*! ./util */ "./cartridges/app_mk_storefront/cartridge/client/default/js/util.js");

$(document).ready(function () {
  processInclude(__webpack_require__(/*! ./popupMarketingEmail/popupEmail */ "./cartridges/app_mk_storefront/cartridge/client/default/js/popupMarketingEmail/popupEmail.js"));
});
}();
/******/ })()
;
//# sourceMappingURL=popupMarketingEmail.js.map